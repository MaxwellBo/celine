<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>@celine/bibhtml</title>

  <meta name="description" content="A Web Components-based referencing system for HTML documents.">
  <meta name="author" content="Max Bo">
  <meta name="keywords" content="bibliography, citation, web components, html, javascript, citation.js">
  <meta name="robots" content="index, follow">

  <meta property="og:title" content="@celine/bibhtml">
  <meta property="og:description" content="A Web Components-based referencing system for HTML documents.">
  <meta property="og:url" content="https://maxbo.me/celine/bibhtml/">
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="Max Bo">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:creator" content="@_max_bo_">
  <meta name="twitter:title" content="@celine/bibhtml">
  <meta name="twitter:description" content="A Web Components-based referencing system for HTML documents.">
  <meta name="twitter:card" content="summary_large_image">

  <meta name="theme-color" content="#ffffff">
  <link rel="apple-touch-icon" sizes="180x180" href="../static/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="../static/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="../static/favicon-16x16.png">
  <link rel="manifest" href="../static/site.webmanifest">

  <link rel="stylesheet" href="../libertine/libertine.css">
  <link rel="stylesheet" href="../celine/cell.css">
  <script type="module">
    import { CelineModule, registerScriptReevaluationOnBlur } from 'https://esm.sh/jsr/@celine/celine@3.0.0';
    import * as Inputs from 'https://esm.run/@observablehq/inputs@0.12.0';
    import * as htl from 'https://esm.run/htl@0.3.1';

    window.celine = CelineModule.usingNewObservableRuntimeAndModule(document);
    window.library = celine.library; /* @observablehq/stdlib */
    window.Inputs = Inputs;
    window.htl = htl;
    console.log(window.celine)

    registerScriptReevaluationOnBlur(document, /*class=*/'echo');
  </script>
</head>

<body>
  <p>
    <a href="../index.html" style="text-decoration: none; font-family: 'Libertinus Sans', sans-serif">←
      @celine/celine</a>
  </p>

  <h1>@celine/bibhtml</h1>
  <div class="authors">
    <div class="author">
      <span class="author-name">Max Bo</span> <sup><a href="https://maxbo.me" style="text-decoration: none;">↗</a></sup>
    </div>
  </div>

  <p class="abstract">
    <cite>bibhtml</cite> is a <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_components">Web
      Components</a>-based referencing system for HTML documents. It aims to provide a similar user experience to
    referencing in LaTeX/BibTeX. It's a thin wrapper around <a
      href="https://citation.js.org/">Citation.js</a><sup><bibhtml-cite>willighagen2019</bibhtml-cite></sup> and 
    gracefully degrades when citations and references are malformed or JavaScript is disabled. <cite>bibhtml</cite> takes
    significant inspiration from <a href="https://github.com/citation-js/replacer">@citation-js/replacer</a>, <a
      href="https://lab.avl.la/references-webcomponent/">References Web Component</a> and <a
      href="https://nota-lang.org/reference.html#def-section-2.4">Nota's
      citations</a><sup><bibhtml-cite>crichton2021nota</bibhtml-cite></sup>.
  </p>

  <table class="header">
    <tbody>
      <tr>
        <th>GitHub</th>
        <td class="width-auto"><a href="https://github.com/MaxwellBo/celine/tree/master/bibhtml">MaxwellBo/<wbr>celine</a><span id="stars"></span> + <a href="https://github.com/MaxwellBo/celine/issues">/issues</a> </td> 
        <th class="width-min">License</th>
        <td><a href="https://github.com/MaxwellBo/celine/blob/master/LICENSE">MIT</a></td>
      </tr>
      <script type="module">
        // ping the GitHub API for the number of stars
        fetch("https://api.github.com/repos/MaxwellBo/celine")
          .then(d => d.json())
          .then(resp => {
            const stars = resp.stargazers_count;
            document.getElementById("stars").textContent = ` (⭐ ${stars})`;
          })
      </script>
      <tr>
        <th>JSR</th>
        <td class="width-auto"><a href="https://jsr.io/@celine/bibhtml">jsr.io/<wbr>@celine/<wbr>bibhtml</a> + <a href="https://jsr.io/@celine/bibhtml/doc">/docs</a></td>
        <th>Version</th>
        <td class="width-min"><a href="https://jsr.io/@celine/bibhtml/versions" id="version">0.2.0</a>, <time  id="updated">Nov 29 2024</time></td>
      </tr>
      <script type="module">
        fetch("https://npm.jsr.io/@jsr/celine__bibhtml")
          .then(d => d.json())
          .then(resp => {
            const latestVersion = resp["dist-tags"].latest;
            document.getElementById("version").textContent = latestVersion;
            const date = new Date(resp.time[latestVersion]);
            const formattedDate = `${date.toLocaleString('default', { month: 'short' })} ${date.getDate()} ${date.getFullYear()}`;
            document.getElementById("updated").textContent = formattedDate;
          })
      </script>
    </tbody>
  </table>

  <h2>Installation</h2>

  <p>
    Add the following script to your HTML file's <code>&lt;head&gt;</code> element:
  </p>

<div id="installation"><script type="module">
  import * as bibhtml from 'https://esm.sh/jsr/@celine/bibhtml@0.2.0';
  customElements.define('bibhtml-bibliography', bibhtml.BibhtmlBibliography);
  customElements.define('bibhtml-reference', bibhtml.BibhtmlReference);
  customElements.define('bibhtml-cite', bibhtml.BibhtmlCite);
</script></div>

  <script id="installation-cell" type="module">
    celine.cell("installation", () => {
      return htl.html`<pre class='echo'>${document.getElementById('installation').innerHTML}</pre>`
    })
  </script>


  <h2>API</h2>

  <p>
    <cite>bibhtml</cite> is structured around 3 <a
      href="https://developer.mozilla.org/en-US/docs/Web/API/Web_components/Using_custom_elements">custom elements</a>:
    <!-- <ol>
      <li>
      A <code>&lt;bibhtml-bibliography&gt;</code> which contains...
      </li>
      <li>
      <code>&lt;bibhtml-reference&gt;</code>s which are cited by...
      </li>
      <li>
      <code>&lt;bibhtml-cite&gt;</code>s inline in the text.
      </li>
    </ol> -->
  </p>

  <h3><code>&lt;bibhtml-bibliography&gt;</code></h3>

  <p>
    The <code>&lt;bibhtml-bibliography&gt;</code> contains <code>&lt;bibhtml-reference&gt;</code>s and renders them in a formatted list (like at the <a href="#references">bottom of the page</a>). References are rendered in the order they are cited by <code>&lt;bibhtml-cite&gt;</code> elements, <i>not</i> the order they are declared in <code>&lt;bibhtml-bibliography&gt;</code>.
  </p>

  <p>
    The <code>format</code> attribute sets the citation style. Currently only <code>"apa"</code> (default) is supported.
  </p>
  <!-- TODO Get <code>"vancouver"</code> or <code>"harvard1"</code> working. -->
  <br />

  <pre class="echo">
&lt;bibhtml-bibliography format="apa"&gt;
  &lt;bibhtml-reference id="willighagen2019"&gt;
    @article{willighagen2019,
    title = {Citation.js: a format-independent, modular bibliography tool for the browser and command line},
    author = {Willighagen, Lars G.},
    year = 2019,
    month = aug,
    keywords = {Bibliography, Javascript},
    volume = 5,
    pages = {e214},
    journal = {PeerJ Computer Science},
    issn = {2376-5992},
    url = {https://doi.org/10.7717/peerj-cs.214},
    doi = {10.7717/peerj-cs.214}
    }
  &lt;/bibhtml-reference&gt;
  ...
&lt;/bibhtml-bibliography&gt;</pre>

  <!-- <script id="bibliography-cell" type="module">
    celine.cell("bibliography-cell", () => {
      return htl.html`<pre class='echo'>${document.getElementById('bibliography-container').innerHTML}</pre>`
    })
  </script> -->

  <h3><code>&lt;bibhtml-reference&gt;</code></h3>

  <p>
    The <code>&lt;bibhtml-reference&gt;</code> is tagged with the <code>id</code> attribute and contains reference information in 4 supported formats.
  </p>

  <h3>BibTeX</h3>

  <script id="bibtex-cell" type="module">
    celine.cell("bibtex-cell", () => {
      const reference = document.querySelector('bibhtml-bibliography').shadowRoot.getElementById('crichton2021nota');
      return htl.html`<pre class='echo'>${reference.outerHTML}</pre>`
    })
  </script>

  <p>
    This is backed by <a href="https://www.npmjs.com/package/@citation-js/plugin-bibtex">@citation-js/plugin-bibtex</a>.
  </p>

  <h3>Unstructured text</h3>

  <p>
    A <code>&lt;bibhtml-reference&gt;</code> can contain unstructured text. This format is useful when:
    <ul>
      <li>The reference is not in a machine readable format</li>
      <li>The reference is malformed</li>
      <li>The machine readable format is not supported by <cite>bibhtml</cite> or Citation.js</li>
    </ul>
  </p>

  <script id="text-cell" type="module">
    celine.cell("text-cell", () => {
      const reference = document.querySelector('bibhtml-bibliography').shadowRoot.getElementById('dunbar2017');
      return htl.html`<pre class='echo'>${reference.outerHTML}</pre>`
    })
  </script>

  <p>
    The Sun is hot<sup><bibhtml-cite>dunbar2017</bibhtml-cite></sup>.
  </p>

  <h3>DOI</h3>

  <script id="doi-cell" type="module">
    celine.cell("doi-cell", () => {
      const reference = document.getElementById('slivaLambert2015');
      return htl.html`<pre class='echo'>${reference.outerHTML}</pre>`
    })
  </script>

  <p>
    This expands to a full reference: <bibhtml-cite ref="slivaLambert2015"></bibhtml-cite>
  </p>

  <p>
    This is backed by <a href="https://www.npmjs.com/package/@citation-js/plugin-doi">@citation-js/plugin-doi</a>.
  </p>

  <h3>Wikidata</h3>

  <script id="wikidata-cell" type="module">
    celine.cell("wikidata-cell", () => {
      const reference = document.getElementById('raymondEtAl2013');
      return htl.html`<pre class='echo'>${reference.outerHTML}</pre>`
    })
  </script>

  <p>
    This expands to a full reference: <bibhtml-cite ref="raymondEtAl2013"></bibhtml-cite>
  </p>

  <p>
    This is backed by <a href="https://www.npmjs.com/package/@citation-js/plugin-wikidata">@citation-js/plugin-wikidata</a>.
  </p>


  <h3><code>&lt;bibhtml-cite&gt;</code></h3>

  <p>
    Say we wanted to cite <span
      id="inner-text-container">Citation.js<sup><bibhtml-cite>willighagen2019</bibhtml-cite></sup></span>,
    we'd use <code>&lt;bibhtml-cite&gt;</code> element:
  </p>

  <script id="inner-text-cell" type="module">
    celine.cell("inner-text-cell", () => {
      return htl.html`<pre class='echo'>${document.getElementById('inner-text-container').innerHTML}</pre>`
    })
  </script>

  <p>
    Alternatively, rather than citing <span id="ref-container">Citation.js<sup><bibhtml-cite ref="willighagen2019"><a
            href="https://citation.js.org/">Link</a></bibhtml-cite></sup></span> with the reference ID as the inner
    text, we can use the <code>ref</code> attribute to specify the ID. This allows you to put a fallback in the element
    if JavaScript fails to load:
  </p>

  <script id="ref-cell" type="module">
    celine.cell("ref-cell", () => {
      return htl.html`<pre class='echo'>${document.getElementById('ref-container').innerHTML}</pre>`
    })
  </script>

  <!-- <p>
    We can site using Nota<sup><bibhtml-cite>crichton2021nota</bibhtml-cite></sup> style citations. 
  </p> -->



  <!-- <script id="bib-cell" type="module">
    celine.cell("bib-cell", () => {
      const bib = document.getElementById('bo2024');
      return htl.html`<pre class='echo'>${bib.outerHTML}</pre>`
    })
  </script> -->

  <!-- <p>
    We can do free text references<sup><bibhtml-cite>bo2024</bibhtml-cite></sup>.
  </p> -->

  <p>
    When citing a <span id="missing-container">reference<sup><bibhtml-cite>freud2012</bibhtml-cite></sup></span> that is
    not in the bibliography, the inner text of the element will be displayed as a fallback:
  </p>

  <script id="missing-cell" type="module">
    celine.cell("missing-cell", () => {
      return htl.html`<pre class='echo'>${document.getElementById('missing-container').innerHTML}</pre>`
    })
  </script>

  <h2 id="references">References</h2>

<bibhtml-bibliography format="vancouver1">
<bibhtml-reference id="willighagen2019">
  @article{willighagen2019,
  title = {Citation.js: a format-independent, modular bibliography tool for the browser and command line},
  author = {Willighagen, Lars G.},
  year = 2019,
  month = aug,
  keywords = {Bibliography, Javascript},
  volume = 5,
  pages = {e214},
  journal = {PeerJ Computer Science},
  issn = {2376-5992},
  url = {https://doi.org/10.7717/peerj-cs.214},
  doi = {10.7717/peerj-cs.214}
  }
</bibhtml-reference>
<bibhtml-reference id="crichton2021nota">
  @inproceedings{crichton2021nota,
  title={A New Medium for Communicating Research on Programming Languages},
  author={Crichton, Will},
  booktitle={Proceedings of the 1st Workshop on Human Aspects of Types and Reasoning Assistants},
  year={2021}
  }
</bibhtml-reference>
<bibhtml-reference id="dunbar2017">
  Brian Dunbar (2017-08-03). The Sun | NASA. National Aeronautics and Space Administration. Accessed on
  2021-08-30.
</bibhtml-reference>
<bibhtml-reference id="slivaLambert2015">
  10.1080/15588742.2015.1017687
</bibhtml-reference>
<bibhtml-reference id="raymondEtAl2013">
  Q21972834
</bibhtml-reference>
</bibhtml-bibliography>
</body>

</html>